<video id="video" autoplay playsinline></video>
<br>

<button onclick="startCamera()">Start Camera</button>
<button onclick="takePhoto()">Take Photo</button>
<button onclick="startRecording()">Start Video</button>
<button onclick="stopRecording()">Stop Video</button>

<br><br>
<input type="file" id="fileInput">
<button onclick="uploadFile()">Upload</button>


<canvas id="canvas" style="display:none;"></canvas>
<img id="photo">
<script>
let stream;
let mediaRecorder;
let recordedChunks = [];

async function startCamera() {
    stream = await navigator.mediaDevices.getUserMedia({
        video: true,
        audio: true
    });
    document.getElementById('video').srcObject = stream;
}

// ðŸ“¸ Capture Photo
function takePhoto() {
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const photo = document.getElementById('photo');

    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;

    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0);

    photo.src = canvas.toDataURL('image/png');
}

// ðŸŽ¥ Record Video
function startRecording() {
    recordedChunks = [];
    mediaRecorder = new MediaRecorder(stream);

    mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
    mediaRecorder.start();
}

function stopRecording() {
    mediaRecorder.stop();
    mediaRecorder.onstop = () => {
        const blob = new Blob(recordedChunks, { type: 'video/webm' });
        const videoURL = URL.createObjectURL(blob);
        window.open(videoURL);
    };

    function uploadFile() {
    const fileInput = document.getElementById('fileInput');
    const file = fileInput.files[0];

    if (!file) {
        alert("Please select a file");
        return;
    }

    const formData = new FormData();
    formData.append("file", file);

    fetch("upload.php", {
        method: "POST",
        body: formData
    })
    .then(response => response.text())
    .then(data => alert(data))
    .catch(error => console.error("Error:", error));
}
}
</script>

